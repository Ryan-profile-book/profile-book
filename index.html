<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>넷플연가 프로필북</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; }
    html, body { margin:0; padding:0; height:100%; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:#fff; color:#222;
    }
    body[data-pattern="white"]  { background:#ffffff; }
    body[data-pattern="cream"]  { background:#fffaf0; }
    body[data-pattern="peach"]  { background:#fff3f0; }
    body[data-pattern="mint"]   { background:#f0fff8; }

    .app{min-height:100vh;display:flex;flex-direction:column;}
    .top-bar{height:44px;padding:0 16px;display:flex;align-items:center;}
    .exit-btn{border:none;background:none;font-size:14px;cursor:pointer;}

    .page-container{flex:1;padding:16px 16px 72px;display:flex;justify-content:center;align-items:center;}
    .page-inner{width:100%;max-width:520px;min-height:60vh;padding:24px 12px;}
    .step{display:none;}
    .step.active{display:block;}

    .chapter-title{text-align:center;margin-top:60px;}
    .chapter-label{font-size:24px;letter-spacing:0.15em;font-weight:700;
      background:linear-gradient(90deg,#ff7a3c,#ff4b7d,#ff8a3d);
      -webkit-background-clip:text;color:transparent;}
    .chapter-number{font-size:36px;color:#ff5a3c;font-weight:700;margin:4px 0 16px;}
    .chapter-sub{font-size:17px;font-family:"Apple SD Gothic Neo","Nanum Myeongjo",serif;}

    .question-title{text-align:center;font-size:16px;margin:24px 0 16px;
      font-family:"Apple SD Gothic Neo","Nanum Myeongjo",serif;}
    .image-placeholder{margin:0 auto 14px;width:220px;height:170px;border-radius:24px;
      border:1px dashed #ffd0a6;background:#fff7f0;display:flex;align-items:center;
      justify-content:center;font-size:11px;color:#d28b4a;text-align:center;padding:8px;}
    textarea{width:100%;min-height:140px;border-radius:16px;border:1px solid #ddd;
      padding:10px 12px;font-size:13px;line-height:1.6;resize:vertical;}
    textarea:focus{outline:none;border-color:#ff8a3d;box-shadow:0 0 0 1px rgba(255,138,61,.2);}
    textarea::placeholder{color:#b3b3b3;}

    .pattern-title{text-align:center;font-size:16px;margin:24px 0 10px;}
    .pattern-grid{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;}
    .pattern-card{border-radius:999px;border:1px solid #ddd;padding:6px 14px;
      font-size:12px;background:#fff;cursor:pointer;}
    .pattern-card.active{border-color:#ff8a3d;box-shadow:0 0 0 1px rgba(255,138,61,.4);}

    .bottom-nav{position:fixed;left:0;right:0;bottom:0;height:64px;padding:8px 16px 12px;
      background:rgba(255,255,255,.96);border-top:1px solid #eee;display:flex;align-items:center;gap:12px;}
    .nav-btn{min-width:88px;padding:8px 12px;border-radius:999px;border:none;font-size:13px;
      cursor:pointer;background:#f3f4f6;color:#444;display:inline-flex;align-items:center;justify-content:center;}
    .nav-btn.primary{background:#111827;color:#fff;}
    .nav-btn:disabled{opacity:.35;cursor:default;}
    .progress-text{flex:1;text-align:center;font-size:11px;color:#999;}
  </style>
</head>
<body data-pattern="white">
  <div class="app">
    <header class="top-bar">
      <button class="exit-btn" type="button" onclick="goFirst()">× 나가기</button>
    </header>

    <main class="page-container">
      <div class="page-inner" id="capture-area">
        <!-- STEP 0 : 배경색 선택 -->
        <section class="step active" data-step="0">
          <div class="pattern-title">배경 색지를 골라주세요</div>
          <div class="pattern-grid" id="pattern-grid">
            <button class="pattern-card active" data-pattern="white">화이트</button>
            <button class="pattern-card" data-pattern="cream">크림</button>
            <button class="pattern-card" data-pattern="peach">피치</button>
            <button class="pattern-card" data-pattern="mint">민트</button>
          </div>
        </section>

        <!-- STEP 1 : CHAPTER 1 -->
        <section class="step" data-step="1">
          <div class="chapter-title">
            <div class="chapter-label">CHAPTER</div>
            <div class="chapter-number">1</div>
            <div class="chapter-sub">챕터 1 제목</div>
          </div>
        </section>

        <!-- STEP 2 : 질문 1 -->
        <section class="step" data-step="2">
          <h2 class="question-title">질문 1</h2>
          <div class="image-placeholder">이미지는 나중에 넣을 자리</div>
          <textarea id="q1" placeholder="답변 1을 적어주세요."></textarea>
        </section>

        <!-- STEP 3 : 질문 2 -->
        <section class="step" data-step="3">
          <h2 class="question-title">질문 2</h2>
          <div class="image-placeholder"></div>
          <textarea id="q2" placeholder="답변 2를 적어주세요."></textarea>
        </section>

        <!-- STEP 4 : CHAPTER 2 -->
        <section class="step" data-step="4">
          <div class="chapter-title">
            <div class="chapter-label">CHAPTER</div>
            <div class="chapter-number">2</div>
            <div class="chapter-sub">챕터 2 제목</div>
          </div>
        </section>

        <!-- STEP 5 : 질문 3 -->
        <section class="step" data-step="5">
          <h2 class="question-title">질문 3</h2>
          <div class="image-placeholder"></div>
          <textarea id="q3" placeholder="답변 3을 적어주세요."></textarea>
        </section>

        <!-- STEP 6 : 질문 4 -->
        <section class="step" data-step="6">
          <h2 class="question-title">질문 4</h2>
          <div class="image-placeholder"></div>
          <textarea id="q4" placeholder="답변 4를 적어주세요."></textarea>
        </section>
      </div>
    </main>

    <footer class="bottom-nav">
      <button class="nav-btn" id="prev-btn" type="button">← 이전</button>
      <div class="progress-text" id="progress-text">1 / 7</div>
      <button class="nav-btn primary" id="next-btn" type="button">다음 →</button>
    </footer>
  </div>

  <!-- 나중에 html2canvas 붙일 자리 -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script> -->

  <script>
    const steps = Array.from(document.querySelectorAll(".step"));
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");
    const progressText = document.getElementById("progress-text");
    const totalSteps = steps.length;
    let currentStep = 0;

    const patternButtons = document.querySelectorAll(".pattern-card");
    patternButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        patternButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        document.body.setAttribute("data-pattern", btn.dataset.pattern);
      });
    });

    function updateStepUI() {
      steps.forEach((step, idx) => {
        step.classList.toggle("active", idx === currentStep);
      });
      progressText.textContent = `${currentStep + 1} / ${totalSteps}`;
      prevBtn.disabled = currentStep === 0;
      nextBtn.textContent = currentStep === totalSteps - 1 ? "완료" : "다음 →";
    }

    prevBtn.addEventListener("click", () => {
      if (currentStep > 0) {
        currentStep--;
        updateStepUI();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentStep < totalSteps - 1) {
        currentStep++;
        updateStepUI();
        window.scrollTo({ top: 0, behavior: "smooth" });
      } else {
        // TODO: 여기에서 전체 답변을 이미지로 저장하는 함수 호출
        // saveAllAsImage();
        alert("여기에서 나중에 이미지 저장 기능이 실행될 거예요!");
      }
    });

    function goFirst() {
      currentStep = 0;
      updateStepUI();
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    updateStepUI();
  </script>
</body>
</html>
