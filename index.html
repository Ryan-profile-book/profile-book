<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>나의 프로필북 - 을지로 취향관</title>

<!-- Google Font (책 느낌 나는 한글 서체) -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

<style>
/* ---------------------------------------
   전체 기본 세팅
--------------------------------------- */
body {
  margin: 0;
  padding: 0;
  background: #f5f5f5;
  font-family: 'Noto Serif KR', serif;
  display: flex;
  justify-content: center;
}

/* 모바일 화면 고정 (390px 카드) */
#phone {
  width: 390px;
  min-height: 100vh;
  background: white;
  position: relative;
  overflow-x: hidden;
}

/* 선택한 색지 배경을 적용할 수 있도록 wrapper 사용 */
#background-wrap {
  width: 100%;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  background-size: cover;
  background-position: center;
  transition: background 0.3s ease;
}

/* 내부 페이지 */
.page-container {
  background: white;
  margin: 0 auto;
  width: 390px;
  min-height: 100vh;
  padding: 20px 22px;
  box-sizing: border-box;
  position: relative;
}

/* ---------------------------------------
   헤더 (캡처 포함)
--------------------------------------- */
.header {
  text-align: center;
  margin-bottom: 10px;
}

.header-title {
  font-size: 17px;
  font-weight: 600;
}

.header-nickname {
  font-size: 13px;
  margin-top: 3px;
  opacity: 0.7;
}

/* ---------------------------------------
   페이지 번호
--------------------------------------- */
.page-number {
  position: absolute;
  right: 15px;
  bottom: 15px;
  font-size: 14px;
  opacity: 0.7;
}

/* ---------------------------------------
   챕터 페이지
--------------------------------------- */
.chapter-wrap {
  margin-top: 40px;
}

.chapter-band {
  width: 100%;
  height: 80px;
  border-radius: 10px;
  opacity: 0.4;
  margin-bottom: 25px;
}

.chapter-title {
  text-align: center;
  font-size: 26px;
  margin-top: -55px;
  position: relative;
  font-weight: 700;
}

/* ---------------------------------------
   질문 페이지
--------------------------------------- */
.question-title {
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 20px;
  text-align: center;
}

.answer-block textarea {
  width: 100%;
  height: 230px;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 12px;
  font-family: inherit;
  font-size: 15px;
  box-sizing: border-box;
  line-height: 1.7;
}

.answer-view {
  display: none;
  white-space: pre-wrap;
  font-size: 15px;
  line-height: 1.9;
  margin-top: 10px;
}

/* 캡처모드: textarea 숨기고 답변뷰 표시 */
body.capture-mode textarea {
  display: none;
}
body.capture-mode .answer-view {
  display: block;
}

/* ---------------------------------------
   첫 페이지 (색지 + 닉네임 입력)
--------------------------------------- */
.color-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 14px;
  margin-top: 20px;
  margin-bottom: 20px;
}

.color-item {
  width: 100%;
  height: 110px;
  border-radius: 10px;
  cursor: pointer;
  border: 2px solid transparent;
  transition: 0.2s;
}

.color-item.selected {
  border: 3px solid #333;
}

.nickname-input {
  width: 100%;
  padding: 13px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 15px;
  box-sizing: border-box;
  margin-top: 20px;
}

.start-btn {
  width: 100%;
  margin-top: 20px;
  padding: 14px;
  border: none;
  background: #000;
  color: white;
  font-size: 16px;
  border-radius: 8px;
  cursor: pointer;
}

/* ---------------------------------------
   하단 버튼바 (이동)
--------------------------------------- */
.nav-buttons {
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
}

.nav-buttons button {
  width: 48%;
  padding: 13px;
  border-radius: 8px;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

.prev-btn { background: #ddd; }
.next-btn { background: #000; color: white; }

/* ---------------------------------------
   숨김 처리
--------------------------------------- */
.step { display: none; }
.step.active { display: block; }

</style>
</head>
<body>

<div id="background-wrap">
  <div id="phone">

    <div class="page-container">

      <!-- =============================
           STEP 0 — 색지 선택 + 닉네임
      ============================== -->
      <section class="step active" data-step="0">
        <h2 style="font-size:22px; text-align:center; margin-bottom:10px;">
          나의 프로필북 만들기
        </h2>

        <p style="text-align:center; margin-bottom:5px;">
          색지를 선택하고 닉네임을 입력하세요
        </p>

        <!-- 색지 10개 -->
        <div class="color-grid" id="colorGrid"></div>

        <input class="nickname-input" id="nicknameInput" placeholder="닉네임을 입력하세요" />

        <button class="start-btn" onclick="startBook()">시작하기</button>
      </section>

      <!-- =============================
           STEP 1 — 타이틀 페이지
      ============================== -->
      <section class="step" data-step="1">
        <div class="title-page" style="text-align:center; margin-top:140px;">
          <div style="font-size:32px; font-weight:700; letter-spacing:1px;">나의 프로필북</div>
          <div style="font-size:18px; margin-top:10px;">을지로 취향관</div>
        </div>
      </section>

      <!-- =============================
           STEP 2 — CHAPTER 1
      ============================== -->
      <section class="step" data-step="2">
        <div class="header">
          <div class="header-title">나의 프로필북 - 을지로 취향관</div>
          <div class="header-nickname" id="headerNickname1"></div>
        </div>

        <div class="chapter-wrap">
          <div class="chapter-band" id="chapterBand1"></div>
          <div class="chapter-title">CHAPTER 1</div>
        </div>

        <div class="page-number">1</div>
      </section>

      <!-- =============================
           STEP 3 — Question 1
      ============================== -->
      <section class="step" data-step="3">
        <div class="header">
          <div class="header-title">나의 프로필북 - 을지로 취향관</div>
          <div class="header-nickname" id="headerNickname2"></div>
        </div>

        <h2 class="question-title">질문 1</h2>
        <div class="answer-block">
          <textarea id="q1"></textarea>
          <div class="answer-view" id="q1-view"></div>
        </div>

        <div class="page-number">2</div>
      </section>

      <!-- =============================
           STEP 4 — Question 2
      ============================== -->
      <section class="step" data-step="4">
        <div class="header">
          <div class="header-title">나의 프로필북 - 을지로 취향관</div>
          <div class="header-nickname" id="headerNickname3"></div>
        </div>

        <h2 class="question-title">질문 2</h2>
        <div class="answer-block">
          <textarea id="q2"></textarea>
          <div class="answer-view" id="q2-view"></div>
        </div>

        <div class="page-number">3</div>
      </section>

      <!-- =============================
           STEP 5 — CHAPTER 2
      ============================== -->
      <section class="step" data-step="5">
        <div class="header">
          <div class="header-title">나의 프로필북 - 을지로 취향관</div>
          <div class="header-nickname" id="headerNickname4"></div>
        </div>

        <div class="chapter-wrap">
          <div class="chapter-band" id="chapterBand2"></div>
          <div class="chapter-title">CHAPTER 2</div>
        </div>

        <div class="page-number">4</div>
      </section>

      <!-- =============================
           STEP 6 — Question 3
      ============================== -->
      <section class="step" data-step="6">
        <div class="header">
          <div class="header-title">나의 프로필북 - 을지로 취향관</div>
          <div class="header-nickname" id="headerNickname5"></div>
        </div>

        <h2 class="question-title">질문 3</h2>
        <div class="answer-block">
          <textarea id="q3"></textarea>
          <div class="answer-view" id="q3-view"></div>
        </div>

        <div class="page-number">5</div>
      </section>

      <!-- =============================
           STEP 7 — Question 4
      ============================== -->
      <section class="step" data-step="7">
        <div class="header">
          <div class="header-title">나의 프로필북 - 을지로 취향관</div>
          <div class="header-nickname" id="headerNickname6"></div>
        </div>

        <h2 class="question-title">질문 4</h2>
        <div class="answer-block">
          <textarea id="q4"></textarea>
          <div class="answer-view" id="q4-view"></div>
        </div>

        <div class="page-number">6</div>
      </section>

      <!-- =============================
           하단 이동 버튼
      ============================== -->
      <div class="nav-buttons">
        <button class="prev-btn" onclick="prevStep()">이전</button>
        <button class="next-btn" onclick="nextStep()">다음</button>
      </div>

    </div>
  </div>
</div>

<!-- html2canvas for capturing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
let currentStep = 0;
let selectedColor = "";
let nickname = "";

/* 색지 10개 */
const colorOptions = [
  "linear-gradient(135deg, #ffd2c8, #ffb199)",  // peach
  "linear-gradient(135deg, #d3ffe5, #9bfac8)",  // mint
  "linear-gradient(135deg, #e8d4ff, #c5a3ff)",  // lavender
  "linear-gradient(135deg, #d4f1ff, #a1dbff)",  // skyblue
  "linear-gradient(135deg, #ffcab5, #ff9580)",  // coral
  "url('https://i.imgur.com/3y3RrQ5.png')",     // beige paper
  "url('https://i.imgur.com/yrRaLCl.png')",     // ricepaper
  "linear-gradient(135deg, #cbb8ff, #a48cff)",  // toned lavender
  "linear-gradient(135deg, #fff1a8, #ffe074)",  // honey yellow
  "linear-gradient(135deg, #cbffe2, #91f5b4)"   // deep mint
];

/* 색지 선택 UI 채우기 */
const colorGrid = document.getElementById("colorGrid");
colorOptions.forEach((col, i) => {
  const div = document.createElement("div");
  div.className = "color-item";
  div.style.background = col;
  div.onclick = () => selectColor(i, col);
  colorGrid.appendChild(div);
});

/* 선택 처리 */
function selectColor(index, col) {
  selectedColor = col;
  [...document.querySelectorAll(".color-item")].forEach((el, i) => {
    el.classList.toggle("selected", i === index);
  });
}

/* 시작 버튼 */
function startBook() {
  nickname = document.getElementById("nicknameInput").value.trim();

  if (!selectedColor) {
    alert("색지를 선택해주세요!");
    return;
  }
  if (!nickname) {
    alert("닉네임을 입력해주세요!");
    return;
  }

  // 배경색 적용
  document.getElementById("background-wrap").style.background = selectedColor;
  document.getElementById("chapterBand1").style.background = selectedColor;
  document.getElementById("chapterBand2").style.background = selectedColor;

  // 헤더에 닉네임 넣기
  ["headerNickname1","headerNickname2","headerNickname3",
   "headerNickname4","headerNickname5","headerNickname6"]
  .forEach(id => {
    document.getElementById(id).textContent = nickname;
  });

  nextStep(); // step1으로 이동
}

/* step 이동 */
function showStep(s) {
  [...document.querySelectorAll(".step")].forEach(el => el.classList.remove("active"));
  document.querySelector(`.step[data-step='${s}']`).classList.add("active");
}

function nextStep() {
  if (currentStep < 7) currentStep++;
  showStep(currentStep);
}

function prevStep() {
  if (currentStep > 0) currentStep--;
  showStep(currentStep);
}

/* textarea → answer-view 동기화 */
["q1","q2","q3","q4"].forEach(id => {
  const ta = document.getElementById(id);
  const view = document.getElementById(id + "-view");
  if (ta && view) {
    ta.addEventListener("input", () => view.textContent = ta.value);
  }
});

</script>
</body>
</html>
