<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ë„·í”Œì—°ê°€ í”„ë¡œí•„ë¶</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
*{box-sizing:border-box;}
html,body{margin:0;padding:0;height:100%;}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#e5e7eb;
  color:#222;
}
.bg{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:16px;
}

/* PHONE */
.phone{
  width:390px;
  height:700px;
  max-width:100%;
  max-height:100vh;
  border-radius:32px;
  overflow:hidden;
  box-shadow:0 24px 60px rgba(15,23,42,0.3);
  display:flex;
  flex-direction:column;
  background:linear-gradient(135deg,#ffe0f0,#fff5d9);
  transition:0.3s;
  position:relative;
}

/* PAPER THEMES */
.phone[data-pattern="sunrise"]{background:linear-gradient(135deg,#ffe0f0,#fff5d9);}
.phone[data-pattern="lavender"]{background:linear-gradient(135deg,#e5e0ff,#fdf2ff);}
.phone[data-pattern="mint"]{background:linear-gradient(135deg,#d9fff2,#f2fff8);}
.phone[data-pattern="sand"]{background:linear-gradient(135deg,#fff4dd,#ffe9e0);}
.phone[data-pattern="gray"]{background:linear-gradient(135deg,#f2f2f2,#dcdcdc);}
.phone[data-pattern="blue"]{background:linear-gradient(135deg,#dce8ff,#c5d8ff);}
.phone[data-pattern="navy"]{background:linear-gradient(135deg,#6f7fb8,#4c5a99);}
.phone[data-pattern="black"]{background:linear-gradient(135deg,#333,#111);}

/* TOP BAR */
.top-bar{
  height:44px;
  padding:0 16px;
  display:flex;
  align-items:center;
  background:rgba(255,255,255,0.6);
  backdrop-filter:blur(10px);
}
.exit-btn{
  border:none;background:none;font-size:14px;cursor:pointer;
}

/* PAGE AREA */
.page-container{flex:1;padding:12px;display:flex;}
.page-frame{
  width:100%;height:100%;
  padding:10px;border-radius:24px;
}
.page-card{
  width:100%;height:100%;
  background:#fff;
  border-radius:20px;
  padding:20px 14px 80px;
  overflow-y:auto;
}

/* STEP */
.step{display:none;}
.step.active{display:block;}

/* HEADER */
.header-fixed{text-align:center;margin-bottom:10px;}
.header-title{font-size:15px;font-weight:600;}
.header-nickname{font-size:13px;opacity:0.7;margin-top:2px;}

/* COVER */
.cover-page{
  height:100%;
  display:flex;flex-direction:column;
  padding:40px 30px 32px;
}
.cover-top-label{
  font-size:11px;letter-spacing:0.18em;
  text-transform:uppercase;margin-bottom:40px;
}
.cover-main-title{
  font-size:30px;
  font-family:"Nanum Myeongjo",serif;
  font-weight:600;margin-bottom:10px;
}
.cover-author{font-size:15px;margin-bottom:80px;}
.cover-desc{
  font-size:14px;
  font-family:"Nanum Myeongjo",serif;
  line-height:1.9;white-space:pre-line;
}

/* CHAPTER */
.chapter-title{text-align:center;margin-top:60px;}
.chapter-ribbon{
  padding:8px 20px;border-radius:999px;
  font-size:14px;font-weight:600;color:#fff;
  margin-bottom:22px;display:inline-block;
}
.chapter1-ribbon{background:#f97373;}
.chapter2-ribbon{background:#3b82f6;}
.chapter3-ribbon{background:#10b981;}

.chapter-heading{
  font-size:20px;
  font-family:"Nanum Myeongjo",serif;
  line-height:1.9;white-space:pre-line;
}

/* QUESTION */
.question-block{margin-bottom:10px;}
.question-title{
  font-size:15px;font-weight:600;margin:6px 0 4px;
  white-space:pre-line;
}
.question-sub{font-size:12px;color:#777;margin-bottom:6px;}

/* ANSWER */
textarea{
  width:100%;min-height:90px;padding:10px;
  border-radius:14px;border:1px solid #ddd;
  font-size:14px;line-height:1.6;
  resize:none;
}
.answer-view{display:none;font-size:14px;white-space:pre-line;line-height:1.6;}

/* POSTER */
.poster-block{text-align:center;margin:8px 0;}
.poster-label{font-size:12px;color:#555;margin-bottom:4px;}
.poster-preview-wrap{
  width:200px;height:260px;margin:0 auto 8px;
  border:1px dashed #ccc;border-radius:16px;
  display:flex;align-items:center;justify-content:center;
  background:#fafafa;overflow:hidden;
}
.poster-preview-wrap img{max-width:100%;max-height:100%;display:none;}
.poster-input{font-size:11px;margin-top:4px;}

body.capture-mode textarea{display:none;}
body.capture-mode .poster-input{display:none;}
body.capture-mode .answer-view{display:block;}

/* BOTTOM NAV */
.bottom-nav{
  position:absolute;left:0;right:0;bottom:0;
  background:rgba(255,255,255,0.95);
  height:66px;padding:8px 12px 12px;
  display:flex;justify-content:space-between;align-items:center;
  z-index:100;
}
.nav-left{display:flex;gap:6px;}
.nav-btn{
  padding:8px 12px;border:none;border-radius:999px;
  background:#f3f4f6;font-size:12px;white-space:nowrap;
}
.nav-btn.primary{background:#111827;color:white;font-size:13px;}
.nav-btn:disabled{opacity:.35;}
.progress-text{font-size:11px;text-align:center;flex:1;}

/* ğŸ”¥ 2 QUESTION HALF-HALF LAYOUT */
.step.two-questions{
  display:flex;flex-direction:column;height:100%;
}
.step.two-questions .question-block{
  flex:1;display:flex;flex-direction:column;
}
.step.two-questions .answer-block{
  flex:1;display:flex;flex-direction:column;
}
.step.two-questions textarea,
.step.two-questions .answer-view{
  flex:1;min-height:0;
}
</style>
</head>
<body>
<div class="bg">
  <div class="phone" id="phone" data-pattern="sunrise">

    <header class="top-bar">
      <button class="exit-btn" onclick="goFirst()">Ã— ë‚˜ê°€ê¸°</button>
    </header>

    <main class="page-container">
      <div class="page-frame" id="capture-target">
        <div class="page-card">

          <!-- STEP 0 : ìƒ‰ì§€ + ë‹‰ë„¤ì„ -->
          <section class="step active" data-step="0">
            <div class="pattern-title">ë°°ê²½ ìƒ‰ì§€ë¥¼ ê³¨ë¼ì£¼ì„¸ìš”</div>

            <div class="pattern-grid">
              <button class="pattern-card active" data-pattern="sunrise">ì„ ë¼ì´ì¦ˆ</button>
              <button class="pattern-card" data-pattern="lavender">ë¼ë²¤ë”</button>
              <button class="pattern-card" data-pattern="mint">ë¯¼íŠ¸</button>
              <button class="pattern-card" data-pattern="sand">ìƒŒë“œ</button>
              <button class="pattern-card" data-pattern="gray">ê·¸ë ˆì´</button>
              <button class="pattern-card" data-pattern="blue">ë¸”ë£¨</button>
              <button class="pattern-card" data-pattern="navy">ë„¤ì´ë¹„</button>
              <button class="pattern-card" data-pattern="black">ì°¨ì½œ ë¸”ë™</button>
            </div>

            <input class="nickname-input" id="nicknameInput" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" />
          </section>

          <!-- STEP 1 : í‘œì§€ -->
          <section class="step" data-step="1">
            <div class="cover-page">
              <div class="cover-top-label">ë„·í”Œì—°ê°€</div>
              <div class="cover-main-title">ë‚˜ì˜ í”„ë¡œí•„ë¶</div>
              <div class="cover-author"><span id="coverName"></span> ì§€ìŒ</div>
              <div class="cover-desc">ë‚˜ì˜ ì·¨í–¥ì„
í•œ í˜ì´ì§€ì”© ì±„ì›Œê°€ëŠ” ì‹œê°„
with ì„ì§€ë¡œ ì·¨í–¥ê´€</div>
            </div>
          </section>

          <!-- STEP 2 : ì±•í„° 1 -->
          <section class="step" data-step="2">
            <div class="header-fixed">
              <div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div>
              <div class="header-nickname"></div>
            </div>

            <div class="chapter-title">
              <div class="chapter-ribbon chapter1-ribbon">Chapter 1</div>
              <div class="chapter-heading">ë‚¨ì´ ë³´ëŠ” ë‚˜,
ë‚´ê°€ ë³´ëŠ” ë‚˜</div>
            </div>
          </section>

          <!-- STEP 3 : Q1+Q2 -->
          <section class="step two-questions" data-step="3">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q1. ë‚¨ë“¤ì´ ë³´ëŠ” ë‚˜ì˜ í‚¤ì›Œë“œ 3ê°€ì§€</h2>
              <textarea id="q1"></textarea>
              <div class="answer-view" id="q1-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q2. ë‚´ê°€ ìƒê°í•˜ëŠ” ë‚˜ì˜ í‚¤ì›Œë“œ</h2>
              <textarea id="q2"></textarea>
              <div class="answer-view" id="q2-view"></div>
            </div>
          </section>

          <!-- STEP 4 : Q3+Q4 -->
          <section class="step two-questions" data-step="4">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q3. í˜¼ì ìˆì„ ë•Œì˜ ë‚˜</h2>
              <textarea id="q3"></textarea>
              <div class="answer-view" id="q3-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q4. ì¹œêµ¬ì™€ ìˆì„ ë•Œì˜ ë‚˜</h2>
              <textarea id="q4"></textarea>
              <div class="answer-view" id="q4-view"></div>
            </div>
          </section>

          <!-- STEP 5 : Q5+Q6 -->
          <section class="step two-questions" data-step="5">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q5. ì—°ì¸ê³¼ ìˆì„ ë•Œì˜ ë‚˜</h2>
              <textarea id="q5"></textarea>
              <div class="answer-view" id="q5-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q6. ê°€ì¡±ê³¼ ìˆì„ ë•Œì˜ ë‚˜</h2>
              <textarea id="q6"></textarea>
              <div class="answer-view" id="q6-view"></div>
            </div>
          </section>

          <!-- STEP 6 : Q7+Q8 -->
          <section class="step two-questions" data-step="6">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q7. íšŒì‚¬ì—ì„œì˜ ë‚˜</h2>
              <textarea id="q7"></textarea>
              <div class="answer-view" id="q7-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q8. ë‚˜ì˜ ì¥ì </h2>
              <textarea id="q8"></textarea>
              <div class="answer-view" id="q8-view"></div>
            </div>
          </section>

          <!-- STEP 7 : Q9+Q10 -->
          <section class="step two-questions" data-step="7">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q9. ë‚˜ì˜ ë‹¨ì </h2>
              <textarea id="q9"></textarea>
              <div class="answer-view" id="q9-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q10. ë‚˜ëŠ” ______í•œ ì‚¬ëŒì´ë‹¤</h2>
              <textarea id="q10"></textarea>
              <div class="answer-view" id="q10-view"></div>
            </div>
          </section>

          <!-- STEP 8 : ì±•í„°2 -->
          <section class="step" data-step="8">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>
            <div class="chapter-title">
              <div class="chapter-ribbon chapter2-ribbon">Chapter 2</div>
              <div class="chapter-heading">ì·¨í–¥ìœ¼ë¡œ ë§í•˜ëŠ” ë‚˜</div>
            </div>
          </section>

          <!-- STEP 9 : Q11 ë‹¨ë… (í¬ìŠ¤í„° ì—…ë¡œë“œ) -->
          <section class="step" data-step="9">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <h2 class="question-title">Q11. ë‚˜ì˜ ì¸ìƒ ì‘í’ˆ</h2>

            <div class="poster-block">
              <div class="poster-label">í¬ìŠ¤í„° ì²¨ë¶€ (ì„ íƒ)</div>
              <div class="poster-preview-wrap">
                <span id="posterPlaceholder">ì´ë¯¸ì§€ ì„ íƒ</span>
                <img id="posterPreview">
              </div>
              <input type="file" accept="image/*" id="posterInput" class="poster-input">
            </div>

            <textarea id="q11"></textarea>
            <div class="answer-view" id="q11-view"></div>
          </section>

          <!-- STEP 10 : Q12+Q13 -->
          <section class="step two-questions" data-step="10">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q12. ì¢‹ì•„í•˜ëŠ” ì¥ë©´</h2>
              <textarea id="q12"></textarea>
              <div class="answer-view" id="q12-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q13. ì‘í’ˆ í•œ ì¤„ ìš”ì•½</h2>
              <textarea id="q13"></textarea>
              <div class="answer-view" id="q13-view"></div>
            </div>
          </section>

          <!-- STEP 11 : Q14+Q15 -->
          <section class="step two-questions" data-step="11">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q14. ë‹®ì€ ê°ì •</h2>
              <textarea id="q14"></textarea>
              <div class="answer-view" id="q14-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q15. ì˜ ì•ˆ ëŒë¦¬ëŠ” ì‘í’ˆ</h2>
              <textarea id="q15"></textarea>
              <div class="answer-view" id="q15-view"></div>
            </div>
          </section>

          <!-- STEP 12 : Q16 ë‹¨ë… -->
          <section class="step" data-step="12">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <h2 class="question-title">Q16. ë‚˜ëŠ” ______í•œ ì´ì•¼ê¸°ì— ëŒë¦°ë‹¤</h2>
            <textarea id="q16"></textarea>
            <div class="answer-view" id="q16-view"></div>
          </section>

          <!-- STEP 13 : ì±•í„°3 -->
          <section class="step" data-step="13">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>
            <div class="chapter-title">
              <div class="chapter-ribbon chapter3-ribbon">Chapter 3</div>
              <div class="chapter-heading">ë‚˜ì˜ ì—°ì•  ì·¨í–¥</div>
            </div>
          </section>

          <!-- STEP 14 : Q17+Q18 -->
          <section class="step two-questions" data-step="14">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q17. ë‚˜ì˜ ì—°ì•  ìŠ¤íƒ€ì¼ 3ë‹¨ì–´</h2>
              <textarea id="q17"></textarea>
              <div class="answer-view" id="q17-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q18. ì‚¬ë‘ë°›ëŠ” ìˆœê°„</h2>
              <textarea id="q18"></textarea>
              <div class="answer-view" id="q18-view"></div>
            </div>
          </section>

          <!-- STEP 15 : Q19+Q20 -->
          <section class="step two-questions" data-step="15">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q19. ì‚¬ë‘ë°›ì§€ ëª»í•œë‹¤ê³  ëŠë¼ëŠ” ìˆœê°„</h2>
              <textarea id="q19"></textarea>
              <div class="answer-view" id="q19-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q20. ë‚˜ì™€ ì˜ ë§ëŠ” ì‚¬ëŒë“¤ì˜ ê³µí†µì </h2>
              <textarea id="q20"></textarea>
              <div class="answer-view" id="q20-view"></div>
            </div>
          </section>

          <!-- STEP 16 : Q21+Q22 -->
          <section class="step two-questions" data-step="16">
            <div class="header-fixed"><div class="header-title">ë‚˜ì˜ í”„ë¡œí•„ë¶ - ì„ì§€ë¡œ ì·¨í–¥ê´€</div><div class="header-nickname"></div></div>

            <div class="question-block">
              <h2 class="question-title">Q21. í‰ë²”í•œ í•˜ë£¨ ë°ì´íŠ¸</h2>
              <textarea id="q21"></textarea>
              <div class="answer-view" id="q21-view"></div>
            </div>

            <div class="question-block">
              <h2 class="question-title">Q22. ë‚˜ëŠ” ______í•œ ì—°ì•  ì·¨í–¥</h2>
              <textarea id="q22"></textarea>
              <div class="answer-view" id="q22-view"></div>
            </div>
          </section>

        </div>
      </div>
    </main>

    <footer class="bottom-nav">
      <div class="nav-left">
        <button class="nav-btn" id="prev-btn">â† ì´ì „</button>
        <button class="nav-btn" id="save-current-btn">í˜„ì¬ í˜ì´ì§€ ì´ë¯¸ì§€</button>
      </div>
      <div class="progress-text" id="progress-text">1 / 17</div>
      <button class="nav-btn primary" id="next-btn">ë‹¤ìŒ â†’</button>
    </footer>

  </div>
</div>

<!-- SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

<script>
const phone=document.getElementById("phone");
const steps=[...document.querySelectorAll(".step")];
const prevBtn=document.getElementById("prev-btn");
const nextBtn=document.getElementById("next-btn");
const saveCurrentBtn=document.getElementById("save-current-btn");
const progressText=document.getElementById("progress-text");
const totalSteps=steps.length;

let currentStep=0;
let nickname="";

/* ìƒ‰ì§€ ì„ íƒ */
document.querySelectorAll(".pattern-card").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".pattern-card").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    phone.dataset.pattern=btn.dataset.pattern;
  });
});

/* ë‹‰ë„¤ì„ ë°˜ì˜ */
function applyNickname(){
  nickname=document.getElementById("nicknameInput").value.trim();
  document.querySelectorAll(".header-nickname").forEach(el=>el.textContent=nickname);
  document.getElementById("coverName").textContent=nickname||"";
}

/* textarea sync */
document.querySelectorAll("textarea[id^='q']").forEach(t=>{
  const v=document.getElementById(t.id+"-view");
  if(!v) return;
  const sync=()=>v.textContent=t.value;
  t.addEventListener("input",sync);
  sync();
});

/* í¬ìŠ¤í„° ì—…ë¡œë“œ */
const posterInput=document.getElementById("posterInput");
const posterPreview=document.getElementById("posterPreview");
const posterPlaceholder=document.getElementById("posterPlaceholder");

if(posterInput){
  posterInput.addEventListener("change",(e)=>{
    const file=e.target.files[0];
    if(!file){
      posterPreview.style.display="none";
      posterPlaceholder.style.display="block";
      return;
    }
    const reader=new FileReader();
    reader.onload=(ev)=>{
      posterPreview.src=ev.target.result;
      posterPreview.style.display="block";
      posterPlaceholder.style.display="none";
    };
    reader.readAsDataURL(file);
  });
}

function updateStepUI(){
  steps.forEach((s,i)=>s.classList.toggle("active",i===currentStep));
  progressText.textContent=`${currentStep+1} / ${totalSteps}`;
  prevBtn.disabled=currentStep===0;

  if(currentStep===totalSteps-1) nextBtn.textContent="ì™„ë£Œ(ZIP)";
  else nextBtn.textContent="ë‹¤ìŒ â†’";

  if(currentStep>0) applyNickname();
}

prevBtn.onclick=()=>{if(currentStep>0){currentStep--;updateStepUI();}}
nextBtn.onclick=async()=>{
  if(currentStep<totalSteps-1){
    currentStep++;
    updateStepUI();
  } else {
    await saveAllPagesAsImages();
  }
}

function goFirst(){currentStep=0;updateStepUI();}

/* ìº¡ì²˜ í•¨ìˆ˜ */
async function captureStepToCanvas(step){
  const prev=currentStep;
  currentStep=step;
  updateStepUI();
  await new Promise(r=>setTimeout(r,200));

  document.body.classList.add("capture-mode");
  await new Promise(r=>setTimeout(r,80));

  const canvas=await html2canvas(document.getElementById("phone"),{scale:2});
  document.body.classList.remove("capture-mode");

  currentStep=prev;
  updateStepUI();

  return canvas;
}

/* í˜„ì¬ í˜ì´ì§€ë§Œ ì €ì¥ (iPhone Friendly) */
saveCurrentBtn.onclick=async()=>{
  const canvas=await captureStepToCanvas(currentStep);
  const url=canvas.toDataURL("image/png");

  const win=window.open();
  if(win){
    win.document.write(`<img src="${url}" style="width:100%;height:auto;" />`);
  } else {
    const a=document.createElement("a");
    a.href=url;a.download=`page-${currentStep}.png`;
    a.click();
  }
};

/* ì „ì²´ ZIP */
async function saveAllPagesAsImages(){
  const zip=new JSZip();

  for(let i=1;i<totalSteps;i++){
    const canvas=await captureStepToCanvas(i);
    const data=canvas.toDataURL("image/png").split(",")[1];
    zip.file(`page-${i}.png`,data,{base64:true});
  }

  const blob=await zip.generateAsync({type:"blob"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="profilebook.zip";
  a.click();
  alert("ZIP ì™„ì„±!");
}

updateStepUI();
</script>

</body>
</html>
